/*! vy 2015-08-31 */
(function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};c=function(a,b){var c,d;for(d in b)c=b[d],a[d]=c;return a},b=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},d=function(a){return alert("implement offset()")},a=function(a,b,c,d){return alert("implement animate()"),null!=d?d.call():void 0},this.Vy=function(){function f(a,b){var d;null==b&&(b={}),this.hook=e(this.hook,this),d={buttons:{left:["rewind"],right:["sound"]}},d=c(d,b),this.root=this.buildPlayer(a,d),this.hook(this.root),this.insertButtons(d.buttons),this.insertTitle(d.title),this.root.addEventListener("mouseleave",function(a){return function(a){return h.MovingSlider=!1,h.MouseDownOnVideo=!1}}(this)),this.component("play",!1).addEventListener("click",function(a){return function(b){return b.preventDefault(),a.play()}}(this)),this.component("pause",!1).addEventListener("click",function(a){return function(b){return b.preventDefault(),h.MovingSlider?(a.seekToPercent(a.getSeekPercent(b.clientX)),a.play()):a.pause(),h.MovingSlider=!1,h.MouseDownOnVideo=!1}}(this)),this.component("pause",!1).addEventListener("mousedown",function(a){return function(a){return a.preventDefault(),h.MouseDownOnVideo=!0}}(this)),this.component("pause",!1).addEventListener("mousemove",function(a){return function(b){var c;return b.preventDefault(),h.MouseDownOnVideo?(h.MovingSlider=!0,c=a.getSeekPercent(b.clientX),a.seekToPercent(c),a.movePlaySliderToPercent(c)):void 0}}(this)),this.component("player",!1).addEventListener("progress",function(a){return function(b){var c,d;return c=null!=(d=a.buffered)?d.end(0):void 0,c!==a.duration?self.moveLoadSliderToPercent(c):void 0}}(this)),this.component("rewind",!1).addEventListener("click",function(a){return function(b){return b.stopPropagation(),a.seekToDuration(0)}}(this)),this.component("sound",!1).addEventListener("click",function(a){return function(b){return b.stopPropagation(),a.toggleMute()}}(this)),this.component("player",!1).addEventListener("play",function(a){return function(b){return a.setAsPlaying(),a.enableControls()}}(this)),this.component("player",!1).addEventListener("pause",function(a){return function(b){return a.setAsPaused(),a.enableTitle()}}(this)),this.component("player",!1).addEventListener("currenttimeupdate",function(a){return function(b){return a.movePlaySliderToPercent(a.getCurrentTimePercent())}}(this)),setInterval(function(a){return function(){return a.isPlaying()?a.component("player").trigger("currenttimeupdate"):void 0}}(this),20)}var g,h,i,j;return j='<div class="vy"> <div class="vy-title"></div> <div class="vy-positioner"> <video class="vy-placeholder"></video> </div> <div class="vy-controls"> <div class="vy-play"></div> <div class="vy-pause"></div> <div class="vy-buttons vy-buttons-left"></div> <div class="vy-buttons vy-buttons-right"></div> <div class="vy-play-slider"></div> <div class="vy-load-slider"></div> </div> </div>',i='<div class="vy-button"></div>',h={MouseDownOnVideo:!1,MovingSlider:!1},g=175,f.prototype.hook=function(a){return a.vy=this},f.prototype.buildPlayer=function(a,c){var d,e,f;return e=a.cloneNode(!0),e.classList.add("vy-player"),f=b(j,!0),d=f.querySelector("video.vy-placeholder"),d.parentNode.replaceChild(e,d),a.parentNode.replaceChild(f,a),f},f.prototype.insertButtons=function(a){var c,d,e,f,g,h,j,k,l;for(e=b(i),j=Object.keys(a),k=[],g=0,h=j.length;h>g;g++)f=j[g],l=this.component("buttons-"+f,!1),"right"===f&&a[f].reverse(),k.push(function(){var b,g,h,i;for(h=a[f],i=[],b=0,g=h.length;g>b;b++)c=h[b],d=e.cloneNode(!0),d.classList.add("vy-"+c),d.textContent=c,i.push(l.appendChild(d));return i}());return k},f.prototype.insertTitle=function(a){return(null!=a?a.length:void 0)?this.component("title",!1).textContent=a:void 0},f.prototype.component=function(a,b){return null==b&&(b=!0),b?$(this.root).find(".vy-"+a):this.root.querySelector(".vy-"+a)},f.prototype.getCurrentTimePercent=function(){var a;return a=this.component("player"),a.currentTime/a.duration},f.prototype.movePlaySliderToPercent=function(a){return a>=1&&(a=1),this.component("play-slider").style.right=100-100*a+"%"},f.prototype.moveLoadSliderToPercent=function(a){return a>=1&&(a=1),this.component("load-slider").style.right=100-100*a+"%"},f.prototype.seekToPercent=function(a){var b;return b=this.component("player",!1),this.seekToDuration(a*b.duration)},f.prototype.seekToDuration=function(a){return this.component("player",!1).currentTime=a},f.prototype.getSeekPercent=function(a){var b;return b=this.component("player",!1),(a-d(b).left)/b.width()},f.prototype.play=function(){return this.component("player",!1).play()},f.prototype.pause=function(){return this.component("player",!1).pause()},f.prototype.mute=function(){return this.component("player",!1).setAttribute("muted","muted"),this.root.setAttribute("muted","muted")},f.prototype.unmute=function(){return this.component("player",!1).setAttribute("muted",null),this.root.setAttribute("muted",null)},f.prototype.enablePauseButton=function(){return hide(this.component("play",!1)),show(this.component("pause",!1))},f.prototype.enablePlayButton=function(){return hide(this.component("pause",!1)),show(this.component("play",!1))},f.prototype.enableControls=function(){var b,c;return c=this.component("title",!1),b=this.component("buttons",!1),a(c,g,{bottom:-1*c.style.height+"px"},function(){return a(b,g,{bottom:"0em"})})},f.prototype.enableTitle=function(){var b,c;return c=this.component("title",!1),b=this.component("buttons",!1),a(b,g,{bottom:-1*b.style.height+"px"},function(){return a(c,g,{bottom:"1em"})})},f.prototype.setAsPlaying=function(){return this.root.setAttribute("playing","playing")},f.prototype.setAsPaused=function(){return this.root.setAttribute("playing",null)},f.prototype.isMuted=function(){return!!this.component("player",!1).getAttribute("muted")},f.prototype.isPlaying=function(){var a;return"playing"===(null!=(a=this.root)?a.getAttribute("playing"):void 0)},f.prototype.toggleMute=function(){return this.isMuted()?this.unmute():this.mute()},f}(),"undefined"!=typeof $&&null!==$&&($.fn.vy=function(a){return null==a&&(a={}),this.each(function(b,c){var d;return null==c.vy&&(d=new Vy(c,a),c.vy=d),c})}),$(function(){return $(".vy-video").each(function(a,b){var c,d;return c=$(b),d=c.data("vy-settings")||{},c.vy(d)})})}).call(this);