/*! vy 2016-06-27 */
(function(){this.Vy=function(){function a(a,b){var d;null==b&&(b={}),d={buttons:{left:["rewind"],right:["sound"]}},d=$.extend(d,b),this.root=this.buildPlayer(a,d),this.root.data("vy",this),this.insertButtons(d.buttons),this.insertTitle(d.title),this.root.on("mouseleave",function(a){return function(a){return c.MovingSlider=!1,c.MouseDownOnVideo=!1}}(this)),this.component("play").on("click",function(a){return function(b){return b.preventDefault(),a.play()}}(this)),this.component("title").on("click",function(a){return function(b){return b.preventDefault(),a.play()}}(this)),this.component("pause").on("click",function(a){return function(b){return b.preventDefault(),c.MovingSlider?(a.seekToPercent(a.getSeekPercent(b.clientX)),a.play()):a.pause(),c.MovingSlider=!1,c.MouseDownOnVideo=!1}}(this)),this.component("pause").on("mousedown",function(a){return function(a){return a.preventDefault(),c.MouseDownOnVideo=!0}}(this)),this.component("pause").on("mousemove",function(a){return function(b){var d;return b.preventDefault(),c.MouseDownOnVideo?(c.MovingSlider=!0,a.pause(),d=a.getSeekPercent(b.clientX),a.seekToPercent(d),a.movePlaySliderToPercent(d)):void 0}}(this)),this.component("player").on("progress",function(a){return function(b){return a.moveLoadSliderToPercent(a.getCurrentLoadPercent())}}(this)),this.component("rewind").on("click",function(a){return function(b){return b.stopPropagation(),a.seekToDuration(0)}}(this)),this.component("sound").on("click",function(a){return function(b){return b.stopPropagation(),a.toggleMute()}}(this)),this.component("player").on("play",function(a){return function(b){return a.setAsPlaying(),a.enableControls()}}(this)),this.component("player").on("pause",function(a){return function(b){return c.MovingSlider?void 0:(a.setAsPaused(),a.enableTitle())}}(this)),this.component("player").on("currenttimeupdate",function(a){return function(b){return a.movePlaySliderToPercent(a.getCurrentTimePercent())}}(this)),setInterval(function(a){return function(){return a.isPlaying()?a.component("player").trigger("currenttimeupdate"):void 0}}(this),20)}var b,c,d,e;return e='<div class="vy"> <div class="vy-title"></div> <div class="vy-positioner"> <video class="vy-placeholder"></video> </div> <div class="vy-controls"> <div class="vy-play"></div> <div class="vy-pause"> <div class="uil-flickr-css"> <div></div><div></div> </div> </div> <div class="vy-buttons vy-buttons-left"></div> <div class="vy-buttons vy-buttons-right"></div> <div class="vy-play-slider"></div> <div class="vy-load-slider"></div> </div> </div>',d='<div class="vy-button"></div>',c={MouseDownOnVideo:!1,MovingSlider:!1},b=175,a.prototype.buildPlayer=function(a,b){var c,d;return c=$(a).clone().addClass("vy-player"),d=$(e).find("video.vy-placeholder").replaceWith(c).end()},a.prototype.insertButtons=function(a){var b,c,e,f,g,h,i,j;for(b=$(d),h=Object.keys(a),i=[],f=0,g=h.length;g>f;f++)e=h[f],j=this.component("buttons-"+e),"right"===e&&a[e].reverse(),i.push(function(){var d,f,g,h;for(g=a[e],h=[],d=0,f=g.length;f>d;d++)c=g[d],h.push(j.append(b.clone().addClass("vy-"+c).text(c)));return h}());return i},a.prototype.insertTitle=function(a){return(null!=a?a.length:void 0)?this.component("title").text(a):void 0},a.prototype.component=function(a){return this.root.find(".vy-"+a)},a.prototype.getCurrentTimePercent=function(){return this.currentTime()/this.duration()},a.prototype.getCurrentLoadPercent=function(){return this.buffered()/this.duration()},a.prototype.timeLeft=function(){return this.duration()-this.currentTime()},a.prototype.movePlaySliderToPercent=function(a){return a>=1&&(a=1),this.component("play-slider").css("right",100-100*a+"%")},a.prototype.moveLoadSliderToPercent=function(a){return a>=1&&(a=1),this.component("load-slider").css("right",100-100*a+"%")},a.prototype.seekToPercent=function(a){return this.seekToDuration(a*this.rawPlayer().duration)},a.prototype.seekToDuration=function(a){return this.rawPlayer().currentTime=a},a.prototype.getSeekPercent=function(a){var b,c;return b=this.component("player"),c=b.offset(),(a-c.left)/b.width()},a.prototype.rawPlayer=function(){return this.component("player").get(0)},a.prototype.buffered=function(){return 0===this.rawPlayer().buffered.length?0:this.rawPlayer().buffered.end(0)},a.prototype.duration=function(){return this.rawPlayer().duration},a.prototype.currentTime=function(){return this.rawPlayer().currentTime},a.prototype.play=function(){return this.component("player").get(0).play()},a.prototype.pause=function(){return this.component("player").get(0).pause()},a.prototype.mute=function(){return this.component("player").attr("muted","muted"),this.root.attr("muted","muted")},a.prototype.unmute=function(){return this.component("player").attr("muted",null),this.root.attr("muted",null)},a.prototype.enableControls=function(){var a,c;return c=this.component("title"),a=this.component("buttons"),c.animate({bottom:-1*c.height()+"px"},b,"swing",function(){return a.animate({bottom:"0em"},b)})},a.prototype.enableTitle=function(){var a,c;return c=this.component("title"),a=this.component("buttons"),a.animate({bottom:-1*a.height()+"px"},b,"swing",function(){return c.animate({bottom:"1em"},b)})},a.prototype.setAsPlaying=function(){return this.root.attr("playing","playing")},a.prototype.setAsPaused=function(){return this.root.attr("playing",null)},a.prototype.isMuted=function(){return!!this.component("player").attr("muted")},a.prototype.isPlaying=function(){var a;return"playing"===(null!=(a=this.root[0])?a.getAttribute("playing"):void 0)},a.prototype.toggleMute=function(){return this.isMuted()?this.unmute():this.mute()},a}(),$.fn.vy=function(a){return null==a&&(a={}),this.each(function(b,c){var d,e;return d=$(c),null==d.data("vy")&&(e=new Vy($(c)[0],a),d.replaceWith(e.root),c=e.root[0]),c})},$(function(){return $(".vy-video").each(function(a,b){var c,d;return c=$(b),d=c.data("vy-settings")||{},c.vy(d)})})}).call(this);