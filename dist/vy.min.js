/*! vy 2015-08-31 */
(function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}};b=function(a,b){var c,d;for(d in b)c=b[d],a[d]=c;return a},a=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},c=function(a){return alert("implement offset()")},this.Vy=function(){function e(a,c){var e;null==c&&(c={}),this.hook=d(this.hook,this),e={buttons:{left:["rewind"],right:["sound"]}},e=b(e,c),this.root=this.buildPlayer(a,e),this.insertButtons(e.buttons),this.insertTitle(e.title),this.hook(this.root),this.root.addEventListener("mouseleave",function(a){return function(a){return g.MovingSlider=!1,g.MouseDownOnVideo=!1}}(this)),this.component("play",!1).addEventListener("click",function(a){return function(b){return b.preventDefault(),a.play()}}(this)),this.component("pause",!1).addEventListener("click",function(a){return function(b){return b.preventDefault(),g.MovingSlider?(a.seekToPercent(a.getSeekPercent(b.clientX)),a.play()):a.pause(),g.MovingSlider=!1,g.MouseDownOnVideo=!1}}(this)),this.component("pause",!1).addEventListener("mousedown",function(a){return function(a){return a.preventDefault(),g.MouseDownOnVideo=!0}}(this)),this.component("pause",!1).addEventListener("mousemove",function(a){return function(b){var c;return b.preventDefault(),g.MouseDownOnVideo?(g.MovingSlider=!0,c=a.getSeekPercent(b.clientX),a.seekToPercent(c),a.movePlaySliderToPercent(c)):void 0}}(this)),this.component("player",!1).addEventListener("progress",function(a){return function(b){var c,d;return c=null!=(d=a.buffered)?d.end(0):void 0,c!==a.duration?self.moveLoadSliderToPercent(c):void 0}}(this)),this.component("rewind",!1).addEventListener("click",function(a){return function(b){return b.stopPropagation(),a.seekToDuration(0)}}(this)),this.component("sound",!1).addEventListener("click",function(a){return function(b){return b.stopPropagation(),a.toggleMute()}}(this)),this.component("player",!1).addEventListener("play",function(a){return function(b){return a.setAsPlaying(),a.enableControls()}}(this)),this.component("player",!1).addEventListener("pause",function(a){return function(b){return a.setAsPaused(),a.enableTitle()}}(this)),this.component("player",!1).addEventListener("currenttimeupdate",function(a){return function(b){return a.movePlaySliderToPercent(a.getCurrentTimePercent())}}(this)),setInterval(function(a){return function(){var b;return a.isPlaying()?(b=new Event("currenttimeupdate"),a.component("player",!1).dispatchEvent(b)):void 0}}(this),20)}var f,g,h,i;return i='<div class="vy"> <div class="vy-title"></div> <div class="vy-positioner"> <video class="vy-placeholder"></video> </div> <div class="vy-controls"> <div class="vy-play"></div> <div class="vy-pause"></div> <div class="vy-buttons vy-buttons-left"></div> <div class="vy-buttons vy-buttons-right"></div> <div class="vy-play-slider"></div> <div class="vy-load-slider"></div> </div> </div>',h='<div class="vy-button"></div>',g={MouseDownOnVideo:!1,MovingSlider:!1},f=175,e.prototype.hook=function(a){return a.vy=this},e.prototype.buildPlayer=function(b,c){var d,e,f;return e=b.cloneNode(!0),e.classList.add("vy-player"),f=a(i,!0),d=f.querySelector("video.vy-placeholder"),d.parentNode.replaceChild(e,d),b.parentNode.replaceChild(f,b),f},e.prototype.insertButtons=function(b){var c,d,e,f,g,i,j,k,l;for(e=a(h),j=Object.keys(b),k=[],g=0,i=j.length;i>g;g++)f=j[g],l=this.component("buttons-"+f,!1),"right"===f&&b[f].reverse(),k.push(function(){var a,g,h,i;for(h=b[f],i=[],a=0,g=h.length;g>a;a++)c=h[a],d=e.cloneNode(!0),d.classList.add("vy-"+c),d.textContent=c,i.push(l.appendChild(d));return i}());return k},e.prototype.insertTitle=function(a){return(null!=a?a.length:void 0)?this.component("title",!1).textContent=a:void 0},e.prototype.component=function(a,b){return null==b&&(b=!0),b?$(this.root).find(".vy-"+a):this.root.querySelector(".vy-"+a)},e.prototype.getCurrentTimePercent=function(){var a;return a=this.component("player",!1),a.currentTime/a.duration},e.prototype.movePlaySliderToPercent=function(a){return this.moveSliderToPercent(this.component("play-slider",!1),a)},e.prototype.moveLoadSliderToPercent=function(a){return this.moveSliderToPercent(this.component("load-slider",!1),a)},e.prototype.moveSliderToPercent=function(a,b){return b>=1&&(b=1),a.style.right=100-100*b+"%"},e.prototype.seekToPercent=function(a){var b;return b=this.component("player",!1),this.seekToDuration(a*b.duration)},e.prototype.seekToDuration=function(a){return this.component("player",!1).currentTime=a},e.prototype.getSeekPercent=function(a){var b;return b=this.component("player",!1),(a-c(b).left)/b.width()},e.prototype.play=function(){return this.component("player",!1).play()},e.prototype.pause=function(){return this.component("player",!1).pause()},e.prototype.mute=function(){return this.component("player",!1).setAttribute("muted","muted"),this.root.setAttribute("muted","muted")},e.prototype.unmute=function(){return this.component("player",!1).removeAttribute("muted"),this.root.removeAttribute("muted")},e.prototype.enablePauseButton=function(){return hide(this.component("play",!1)),show(this.component("pause",!1))},e.prototype.enablePlayButton=function(){return hide(this.component("pause",!1)),show(this.component("play",!1))},e.prototype.enableControls=function(){var a,b;return b=this.component("title",!1),a=this.component("buttons",!1)},e.prototype.enableTitle=function(){var a,b;return b=this.component("title",!1),a=this.component("buttons",!1)},e.prototype.setAsPlaying=function(){return this.root.setAttribute("playing","playing")},e.prototype.setAsPaused=function(){return this.root.removeAttribute("playing")},e.prototype.isMuted=function(){return!!this.component("player",!1).getAttribute("muted")},e.prototype.isPlaying=function(){var a;return"playing"===(null!=(a=this.root)?a.getAttribute("playing"):void 0)},e.prototype.toggleMute=function(){return this.isMuted()?this.unmute():this.mute()},e}(),window.addEventListener("load",function(a){var b,c,d,e,f,g;for(d=document.querySelectorAll(".vy-video"),e=[],b=0,c=d.length;c>b;b++)g=d[b],f=JSON.parse(g.getAttribute("data-vy-settings")),e.push(g.vy=new Vy(g,f));return e}),"undefined"!=typeof $&&null!==$&&($.fn.vy=function(a){return null==a&&(a={}),this.each(function(b,c){return null==c.vy&&(c.vy=new Vy(c,a)),c})})}).call(this);